# Changelog

## [1.6.1] - 2026-02-15

### 🧱 代码重构
- **Popup / 触发层重构**：重构 `src/ui/at-trigger-popup.ts`，并抽离 `InputContextSelector`（@ 上下文选择）与 `PromptSelectorPopup`（# 提示词选择），统一事件监听/关闭逻辑，降低耦合。
- **Settings 系统重构**：引入 `SettingsManager` 分离数据与 UI；设置页拆分为 `settings-tab` + `views/*` 的模块化结构，便于扩展与维护（含补全快捷键录制与 keymap 刷新）。

### ⚙️ 设置与快捷键
- **设置界面模块化**：配置项按功能拆分，查找与调整更直观。
- **对话/补全快捷键可配置**：对话命令可在 Obsidian「设置 → 快捷键」中自定义；Tab 补全支持在设置中录制/修改按键。

### 🪟 弹窗与交互优化
- **拖动逻辑优化**：修复拖动过程中弹窗位置“乱跳”的问题，交互更稳定。

### 🎛️ 模式调整
- **Ask / Edit / Direct 模式分离**：三种模式职责更清晰——Ask 用于对话问答；Edit 走 Diff/Apply 确认修改；Direct 直接将修改应用到文档。

### 🐛 Bug 修复
- **@ 与 # 触发修复**：修复上下文选择与提示词选择的相关异常。

## [1.6.0] - 2026-02-05

### 🚀 重大更新
- **Tab 自动补全功能**：全新的即时代码/文本补全体验，智能预测您的输入，提升写作效率。
- **选中文字唤出工具栏**：选中编辑器中的文字即可唤出快捷工具栏，常用操作触手可及。

### ✨ 功能更新
- **Keychain 存储 API**：新增 API 支持安全存储敏感信息（如 API Keys），提升安全性。
- **Diff 界面**：全新的差异对比界面，变更内容一目了然，方便审阅 AI 生成的内容。

### 🎨 界面与体验更新
- **AI 对话弹窗优化**：
    - 支持无级调节大小，适应不同屏幕和工作流。
    - 底部功能栏布局优化，操作更顺手。
    - 整体 UI 风格优化，更加精致现代。
- **设置界面**：排版重新设计，配置项更加直观易懂。
