# Markdown Next AI



**Markdown Next AI** 是一个深度集成到 Obsidian 的 AI 助手插件。它不仅仅是一个简单的聊天窗口，更是懂你笔记上下文的智能写作伴侣。



通过强大的上下文感知、灵活的模型管理以及自定义提示词系统，它能帮助你完成从灵感捕捉、内容润色到全文续写的各项任务。



## 📅 更新日志 (v1.6.0)

### 🚀 重大更新
* **Tab 自动补全功能**：全新的即时代码/文本补全体验，智能预测您的输入，提升写作效率。
* **选中文字唤出工具栏**：选中编辑器中的文字即可唤出快捷工具栏，常用操作触手可及。

### ✨ 功能更新
* **Keychain 存储 API**：新增 API 支持安全存储敏感信息（如 API Keys），提升安全性。
* **Diff 界面**：全新的差异对比界面，变更内容一目了然，方便审阅 AI 生成的内容。

### 🎨 界面与体验更新
* **AI 对话弹窗优化**：
    * 支持无级调节大小，适应不同屏幕和工作流。
    * 底部功能栏布局优化，操作更顺手。
    * 整体 UI 风格优化，更加精致现代。
* **设置界面**：排版重新设计，配置项更加直观易懂。

---



## ✨ 核心特性



### 1. 🎯 上下文多模态对话

- 在文档中输入 `@` 唤出 AI 对话框，支持引用笔记库中的文件或文件夹。AI 会读取引用内容作为背景知识，实现真正的"基于知识库对话"。

- 支持直接粘贴或上传图片，多模态模型可识别图片内容并进行分析、问答和讨论。

![上下文引用演示](assets/chat_context.png)



### 2. 🤖 沉浸式内联写作与修改

- **智能续写**: 根据上下文自动续写内容，保持风格一致。

- **选中文本修改**: 选中任意文本进行润色、翻译或改写。

- **可视化 Diff 视图**: 引入全新的 Diff 界面，以清晰的差异对比形式展示 AI 的修改建议。支持对变更内容进行 **逐段确认**（接受/拒绝/保留两者），像代码 Review 一样高效处理文本修改。



![智能润色演示](assets/inline_generation.png)



### 3. ⚡️ Tab 自动补全 (Tab Completion)
全新的即时文本/代码补全体验，智能预测您的输入，提升写作效率。

- **触发方式**: 在输入过程中，AI 会自动预测后续内容并以灰色虚影显示。
- **接受建议**: 按下 `Tab` 键即可将建议内容填入文档。
- **智能感知**: 能够根据上下文自动判断补全内容，无论是代码片段还是自然语言段落。
- **配置**: 支持自定义触发延迟、上下文长度等参数，满足不同写作习惯。

### 4. ✨ 选中工具栏 (Selection Toolbar)
选中编辑器中的文字即可唤出快捷工具栏，常用操作触手可及。

- **快速唤出**: 选中文本后，会出现悬浮的 "✨" 图标，鼠标悬停或点击即可展开菜单。
- **即时操作**: 提供 "AI Modify" 等快捷操作，无需记忆快捷键。
- **无缝衔接**: 与 Diff 视图结合，修改内容一目了然。

### 5. ⚡️ 快捷指令系统

在对话框输入 `#` 快速调用常用提示词（扩写、摘要、润色、翻译等）。支持自定义添加、编辑指令，打造专属写作工作流。
![提示词管理](assets/settings_prompt.png)



### 6. 🛠️ 灵活的模型管理

兼容 OpenAI 格式的任意 API（GPT、Claude、Gemini、DeepSeek 等）。支持添加多个模型配置，自由切换使用。



![模型配置](assets/settings_model.png)



---



## 🚀 功能清单



### 📝 智能写作

- **Tab 补全**: 智能预测输入，一键补全代码或文本

- **智能续写**: 根据上下文自动续写内容，保持风格一致

- **选区修改**: 选中任意文本进行润色、翻译或重写

- **内容润色**: 优化文字表达，提升逻辑性和可读性

- **文本摘要**: 提炼核心观点，生成精简摘要

- **翻译转换**: 支持多语言互译



### 📎 上下文引用

- **文件引用**: 输入 `@` 快速引用笔记库中的文件

- **文件夹引用**: 批量引用整个文件夹作为背景知识

- **知识库对话**: AI 基于引用内容进行深度理解和回复



### 🖼️ 多模态支持

- **图片上传**: 支持点击上传或直接粘贴图片

- **图片分析**: 多模态模型可识别和分析图片内容

- **视觉问答**: 针对图片内容进行提问和讨论



### ⚡ 快捷指令

- **提示词库**: 输入 `#` 快速调用常用提示词

- **自定义指令**: 支持添加、编辑、删除个性化提示词

- **全局规则**: 设置全局 Prompt 规则，AI 始终遵循你的写作风格



### 🎨 沉浸式体验

- **流式输出**: 实时流式显示生成内容，无需等待

- **Diff 视图**: 全新的差异对比界面，变更内容一目了然，方便审阅 AI 生成的内容

- **选中工具栏**: 选中文本唤出快捷菜单，操作更顺手

- **内联预览**: 生成内容高亮嵌入文档，所见即所得

- **三向决策**: 支持替换原文、追加内容或放弃生成

- **智能定位**: 弹窗自动跟随文本末尾，不遮挡视线



### 🔧 灵活配置

- **多供应商**: 支持 OpenAI、Anthropic、Google、DeepSeek 等主流服务商

- **多模型**: 自由添加和切换不同模型，按需选用

- **兼容中转**: 支持 OpenAI 兼容格式的第三方 API 服务





## 📦 安装指南



由于本插件尚未上架 Obsidian 社区插件市场，请按照以下步骤手动安装：



1. 下载本仓库最新 Release 中的 `main.js`, `manifest.json`, `styles.css`,data.json 。

2. 打开您的 Obsidian 仓库文件夹，进入 `.obsidian/plugins` 目录。

3. 创建一个名为 `markdown-next-ai` 的新文件夹。

4. 将下载的三个文件放入该文件夹。

5. 重启 Obsidian，在 **设置** -> **第三方插件** 中启用 "Markdown Next AI"。



## ⚙️ 配置说明

启用插件后，请进入设置页面进行初始化配置。新版设置界面采用标签页设计，分类更加清晰：

### 1. 模型 (Models)
- **供应商设置**: 添加 OpenAI、Anthropic、DeepSeek 等供应商，设置 Base URL 和 API Key。
- **Keychain 存储**: 开启后，API Key 将安全存储在系统钥匙串中（需 Obsidian 支持）。
- **模型管理**: 添加和启用/禁用特定模型 ID。

### 2. 编辑器 (Editor)
- **通用设置**: 配置 AI 响应语言等。
- **Diff 视图**: 自定义差异对比界面的显示方式。

### 3. 补全 (Completion)
- **Tab 自动补全**: 开启/关闭 Tab 补全功能。
- **触发设置**: 调整自动触发延迟、冷却时间等。
- **模型设置**: 选择专门用于补全的模型（推荐使用响应速度快的模型）。

### 4. 对话 (Chat)
- **系统提示词**: 自定义 AI 对话的系统提示词。
- **上下文设置**: 配置引用文件/文件夹时的上下文长度限制。

### 5. 其他 (Others)
- **高级设置**: 调试模式等。
