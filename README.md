# Markdown Next AI



**Markdown Next AI** 是一个深度集成到 Obsidian 的 AI 助手插件。它不仅仅是一个简单的聊天窗口，更是懂你笔记上下文的智能写作伴侣。



通过强大的上下文感知、灵活的模型管理以及自定义提示词系统，它能帮助你完成从灵感捕捉、内容润色到全文续写的各项任务。



## 📅 更新日志 (v1.5.0)



### ✨ 新增功能

* **选中文本 AI 修改**: 选中任意文本后，通过右键菜单或快捷键唤起 AI，即可对选中文本进行润色、翻译或重写。

* **全局规则系统 (Global Rules)**: 支持设置全局 Prompt 规则（如"始终使用中文"、"保持学术风格"），AI 将始终遵循你的写作偏好。

* **三向决策流**: AI 生成内容后，提供 **替换原文 / 追加到末尾 / 放弃** 三种选择，灵活应对不同场景。

* **智能追加模式**: 在修改文本时，可选择保留原文并将 AI 建议追加到后方，方便对比和融合。



### 🎨 体验优化



* **Cursor 风格 UI**: 全新设计的操作按钮（绿色确认、蓝色追加、红色拒绝），视觉更清晰，交互更流畅。

* **呼吸点加载动画**: 引入科技感十足的呼吸圆点指示器，实时反馈 AI 思考状态。

* **智能定位**: 操作弹窗自动追踪生成文本末尾，并智能避让遮挡，确保阅读体验。



---



## ✨ 核心特性



### 1. 🎯 上下文多模态对话

- 在文档中输入 `@` 唤出 AI 对话框，支持引用笔记库中的文件或文件夹。AI 会读取引用内容作为背景知识，实现真正的"基于知识库对话"。

- 支持直接粘贴或上传图片，多模态模型可识别图片内容并进行分析、问答和讨论。

![上下文引用演示](assets/chat_context.png)



### 2. 🤖 沉浸式内联写作与修改

- **智能续写**: 根据上下文自动续写内容。

- **选中文本修改**: 选中一段文字，让 AI 进行润色、翻译或改写。

- **三向决策**: AI 生成的内容以高亮形式嵌入，提供 **替换 / 追加 / 放弃** 浮窗操作。像处理代码合并一样处理文字，保持写作思维不被打断。



![智能润色演示](assets/inline_generation.png)



### 3. ⚡️ 快捷指令系统

在对话框输入 `#` 快速调用常用提示词（扩写、摘要、润色、翻译等）。支持自定义添加、编辑指令，打造专属写作工作流。



![提示词管理](assets/settings_prompt.png)



### 4. 🛠️ 灵活的模型管理

兼容 OpenAI 格式的任意 API（GPT、Claude、Gemini、DeepSeek 等）。支持添加多个模型配置，自由切换使用。



![模型配置](assets/settings_model.png)



---



## 🚀 功能清单



### 📝 智能写作

- **智能续写**: 根据上下文自动续写内容，保持风格一致

- **选区修改**: 选中任意文本进行润色、翻译或重写

- **内容润色**: 优化文字表达，提升逻辑性和可读性

- **文本摘要**: 提炼核心观点，生成精简摘要

- **翻译转换**: 支持多语言互译



### 📎 上下文引用

- **文件引用**: 输入 `@` 快速引用笔记库中的文件

- **文件夹引用**: 批量引用整个文件夹作为背景知识

- **知识库对话**: AI 基于引用内容进行深度理解和回复



### 🖼️ 多模态支持

- **图片上传**: 支持点击上传或直接粘贴图片

- **图片分析**: 多模态模型可识别和分析图片内容

- **视觉问答**: 针对图片内容进行提问和讨论



### ⚡ 快捷指令

- **提示词库**: 输入 `#` 快速调用常用提示词

- **自定义指令**: 支持添加、编辑、删除个性化提示词

- **全局规则**: 设置全局 Prompt 规则，AI 始终遵循你的写作风格



### 🎨 沉浸式体验

- **流式输出**: 实时流式显示生成内容，无需等待

- **内联预览**: 生成内容高亮嵌入文档，所见即所得

- **三向决策**: 支持替换原文、追加内容或放弃生成

- **智能定位**: 弹窗自动跟随文本末尾，不遮挡视线



### 🔧 灵活配置

- **多供应商**: 支持 OpenAI、Anthropic、Google、DeepSeek 等主流服务商

- **多模型**: 自由添加和切换不同模型，按需选用

- **兼容中转**: 支持 OpenAI 兼容格式的第三方 API 服务





## 📦 安装指南



由于本插件尚未上架 Obsidian 社区插件市场，请按照以下步骤手动安装：



1. 下载本仓库最新 Release 中的 `main.js`, `manifest.json`, `styles.css`,data.json 。

2. 打开您的 Obsidian 仓库文件夹，进入 `.obsidian/plugins` 目录。

3. 创建一个名为 `markdown-next-ai` 的新文件夹。

4. 将下载的三个文件放入该文件夹。

5. 重启 Obsidian，在 **设置** -> **第三方插件** 中启用 "Markdown Next AI"。



## ⚙️ 配置说明



启用插件后，请进入设置页面进行初始化配置：



### 1. 供应商与 API 设置

* 支持添加多个供应商（Provider）。

* **Base URL**: 默认为 `https://api.openai.com/v1`。如使用中转服务（如 OneAPI），请修改此地址。

* **API Key**: 填入对应的密钥。



### 2. 模型管理 (Model Settings)

* 点击 **"添加模型"** 注册你想要使用的模型 ID（如 `gpt-4o`, `gemini-1.5-pro`）。

* 可以独立启用或禁用特定模型。
