# 🚀 Release v1.5.0

**v1.5.0** 是 Markdown Next AI 是近期最后一次更新。我们带来了备受期待的**“选中文本修改”**与**“全局规则系统”**

## ✨ 核心功能 

### 1. 🖱️ 选中文本 AI 修改 (Selection Modify)

选中任意文本后唤起 AI，即可对其进行**润色、翻译或重写**。不再局限于续写，现在的 Markdown Next AI 是你全能的文字编辑助手。

### 2. ⚖️ 三向决策流 (Three-Way Decision)

AI 生成内容后，我们提供了类似代码合并的决策体验，让写作思维不被打断：

* **✅ 替换 (Replace)**：直接覆盖选中的原文。
* **🔵 追加 (Append)**：保留原文，将 AI 建议追加到后方（适合对比或补充）。
* **❌ 放弃 (Discard)**：撤销生成，无事发生。

### 3. 🌐 全局规则系统 (Global Rules)

支持设置全局生效的 Prompt 规则（如“始终使用中文”、“保持学术严谨风格”）。无论在文档何处唤起 AI，它都会记住你的偏好，无需重复指令。

---

## 📐 交互与体验革命 (UX & Positioning)

本次更新解决了长久以来弹窗定位的痛点，带来了极致的稳定性：

### 🎯 聊天框定位策略

针对**多行文本选择**场景，我们引入了全新的视觉定位策略，彻底解决了弹窗“乱飞”的问题：

### 🎨 Cursor 风格 UI & 呼吸动画

* **全新按钮设计**：引入了极具辨识度的**绿色(确认)、蓝色(追加)、红色(拒绝)**操作按钮，视觉清晰，点击爽快。
* **呼吸点加载**：新增科技感十足的呼吸圆点指示器，实时反馈 AI 的思考状态。

## 🛠️ 修复与优化 

* **[Fix] 坐标漂移修复**：弃用了旧版鼠标事件依赖，转为深度集成 Obsidian 编辑器内核 API。现在无论如何滚动页面或调整光标，弹窗都会死死咬住目标位置。
* **[Fix] 遮挡避让**：修复了在文档底部唤出 AI 时，弹窗可能被屏幕边缘遮挡的问题。
* **[Opt] 智能追加模式**：在修改模式下选择“追加”时，会自动智能处理换行与空格，确保追加内容与原文衔接自然。

---

## 📦 安装与更新

1. 下载本 Release 中的 `main.js`, `manifest.json`, `styles.css`。
2. 替换您的 Obsidian 插件目录 `.obsidian/plugins/markdown-next-ai` 中的同名文件。
3. 在 Obsidian 设置中重启插件或点击 "Reload" 即可生效。

> **开发者留言：**
> v1.5.0 融合了强大的编辑能力与我们对“写作手感”的执着追求。从“能用”到“好用”，希望这个版本能成为你笔记流中不可或缺的一部分。Enjoy!