# Markdown Next AI

**Markdown Next AI** 是一个深度集成到 Obsidian 的 AI 助手插件。它不仅仅是一个简单的聊天窗口，更是懂你笔记上下文的智能写作伴侣。

通过强大的上下文感知、灵活的模型管理以及自定义提示词系统，它能帮助你完成从灵感捕捉、内容润色到全文续写的各项任务。

## ✨ 核心特性

### 1. 🎯 上下文多模态对话
- 在文档中输入 `@` 唤出 AI 对话框，支持引用笔记库中的文件或文件夹。AI 会读取引用内容作为背景知识，实现真正的"基于知识库对话"。
- 支持直接粘贴或上传图片，多模态模型可识别图片内容并进行分析、问答和讨论。
![上下文引用演示](assets/chat_context.png)

### 2. 🤖 沉浸式内联写作
AI 生成的内容以高亮形式直接嵌入文档，提供 **接受/拒绝** 浮窗操作。像处理代码合并一样处理文字，保持写作思维不被打断。

![智能润色演示](assets/inline_generation.png)

### 3. ⚡️ 快捷指令系统
在对话框输入 `#` 快速调用常用提示词（扩写、摘要、润色、翻译等）。支持自定义添加、编辑指令，打造专属写作工作流。

![提示词管理](assets/settings_prompt.png)

### 4. 🛠️ 灵活的模型管理
兼容 OpenAI 格式的任意 API（GPT、Claude、Gemini、DeepSeek 等）。支持添加多个模型配置，自由切换使用。

![模型配置](assets/settings_model.png)

---

## 🚀 功能清单

### 📝 智能写作
- **智能续写**: 根据上下文自动续写内容，保持风格一致
- **内容润色**: 优化文字表达，提升逻辑性和可读性
- **文本摘要**: 提炼核心观点，生成精简摘要
- **翻译转换**: 支持多语言互译

### 📎 上下文引用
- **文件引用**: 输入 `@` 快速引用笔记库中的文件
- **文件夹引用**: 批量引用整个文件夹作为背景知识
- **知识库对话**: AI 基于引用内容进行深度理解和回复

### 🖼️ 多模态支持
- **图片上传**: 支持点击上传或直接粘贴图片
- **图片分析**: 多模态模型可识别和分析图片内容
- **视觉问答**: 针对图片内容进行提问和讨论

### ⚡ 快捷指令
- **提示词库**: 输入 `#` 快速调用常用提示词
- **自定义指令**: 支持添加、编辑、删除个性化提示词
- **全局规则**: 设置全局 Prompt 规则，AI 始终遵循你的写作风格

### 🎨 沉浸式体验
- **流式输出**: 实时逐字显示生成内容，无需等待
- **内联预览**: 生成内容高亮嵌入文档，所见即所得
- **接受/拒绝**: 一键确认或撤销，像代码合并一样处理文字

### 🔧 灵活配置
- **多供应商**: 支持 OpenAI、Anthropic、Google、DeepSeek 等主流服务商
- **多模型**: 自由添加和切换不同模型，按需选用
- **兼容中转**: 支持 OpenAI 兼容格式的第三方 API 服务


## 📦 安装指南

由于本插件尚未上架 Obsidian 社区插件市场，请按照以下步骤手动安装：

1.  下载本仓库最新 Release 中的 `main.js`, `manifest.json`, `styles.css`,data.json 。
2.  打开您的 Obsidian 仓库文件夹，进入 `.obsidian/plugins` 目录。
3.  创建一个名为 `markdown-next-ai` 的新文件夹。
4.  将下载的三个文件放入该文件夹。
5.  重启 Obsidian，在 **设置** -> **第三方插件** 中启用 "Markdown Next AI"。

## ⚙️ 配置说明

启用插件后，请进入设置页面进行初始化配置：

### 1. 供应商与 API 设置
* 支持添加多个供应商（Provider）。
* **Base URL**: 默认为 `https://api.openai.com/v1`。如使用中转服务（如 OneAPI），请修改此地址。
* **API Key**: 填入对应的密钥。

### 2. 模型管理 (Model Settings)
* 点击 **"添加模型"** 注册你想要使用的模型 ID（如 `gpt-4o`, `gemini-1.5-pro`）。
* 可以独立启用或禁用特定模型。

### 3. 常用提示词 (Prompts)
* 插件预置了 "内容扩充"、"核心摘要"、"润色优化" 等常用指令。
* 你可以在设置页点击 **"编辑"** 修改其 System Prompt，或点击 **"添加提示词"** 创建新的快捷指令。

## 📖 使用方法

1.  **呼出对话**: 在编辑器任意位置输入 `@` 或使用快捷键呼出 AI 浮窗。
2.  **引用文件**: 对话框输入`@`，引用路径下文件。
3.  **常用提示词**：模仿NotionAI的对话方式，对话框输入`#`唤出快捷指令，可在设置中自定义快捷指令。
4.  **插入内容**: AI 生成完毕后，点击 "接受" 即可将内容保留在笔记中。

## 🛠️ 开发构建

本项目基于纯 JavaScript 开发， 将下载的三个文件放 `.obsidian/plugins` 目录后，在 Obsidian 中执行 "Reload Custom Plugins" 即可生效，无需编译。

## License

MIT